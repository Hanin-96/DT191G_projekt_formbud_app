@page "/"
@using FormBudApp.Models;
@inject HttpClient Http



<PageTitle>Home</PageTitle>

<h1>Hello, world!</h1>



@if (productList == null)
{
    <p><em>Laddar produkter...</em></p>
}
else
{
    <div class="table-wrap">

        <table class="table">

            <tbody>
                @foreach (var product in productList)
                {
                    <tr>
                        <td>@product.ProductName</td>
                        <td>@product.Description</td>
                        <td>@product.Worth</td>
                        <td>@product.Condition</td>
                        <td>@product.TimeLeft</td>

                        @if (product.IsSold == false)
                        {
                            <td>Inte såld</td>
                        }
                        else
                        {
                            <td>Såld</td>
                        }
                        <td><NavLink class="btn btn-primary" href="@($"/product/{product.Id}")">Till produkt</NavLink></td>

                    </tr>
                }
            </tbody>
            </table>
    </div>
}

@code {
   

    private Product[]? productList;

    protected override async Task OnInitializedAsync()
    {
        productList = await Http.GetFromJsonAsync<Product[]>("http://localhost:5021/api/products");
    }





}
